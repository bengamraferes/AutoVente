@model IEnumerable<AutoVente.Models.Vehicule>
@using AutoVente.ViewsModels

@{
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<h2>Index</h2>

@Html.Partial("_Notifications")

<section class="section-form ">
    @if (TempData["CreateVehicule"] != null)
    {
        @Html.Partial("_PartialCreateVehicule", new VehiculeViewModel())
    }
</section>

<a href="~/Vehicule/Create" class=" btn btn-info fontBlack btnAllwidth "><i class="fas fa-plus"></i><span class="noPhone"> Nouvelle voiture</span></a>

<section id="no-more-tables">
    <table class="table table-bordered table-striped table-condensed cf text-center table-layout vertical-align table-shadow">
        <thead class="cf ">
            <tr class="custom-tr text-center">
                <th></th>
                <th>
                    Marque
                </th>
                <th>
                    Model
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Couleur.CodeCouleur)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.DateMisEnCirculation)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Kilometrage)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Etat)
                </th>
                <th></th>
            </tr>
        </thead>
        @foreach (var item in Model)
        {
            <tr>
                <td id="detail-btn-@item.Id" class="detail-btn align-self-center ">
                    <i class="fas fa-2x fa-plus-circle"></i>
                </td>
                <td data-title="Marque">
                    @Html.DisplayFor(modelItem => item.Model.Marque.Nom)
                </td>
                <td data-title="Model">
                    @Html.DisplayFor(modelItem => item.Model.Nom)
                </td>
                <td data-title="Couleur">
                    @Html.DisplayFor(modelItem => item.Couleur.CodeCouleur)
                </td>
                <td data-title="Mise en circulation">
                    Mise en circulation
                </td>
                <td data-title="Kilometrage">
                    @Html.DisplayFor(modelItem => item.Kilometrage)
                </td>
                <td data-title="Etat">
                    @Html.DisplayFor(modelItem => item.Etat)
                </td>

                <td class="btn-td">
                    @Html.ActionLink("Edit", "Edit", new { id = item.Immatriculation }) |
                    <a class="btnAllwidth button btn btn-danger fontBlack " data-toggle="modal" data-target="#@item.Id">
                        <i class="fas fa-trash-alt "></i><span class="noPhone"> Supprimer</span>
                    </a>

                    <div class="modal fade" id="@item.Id" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h4 class="modal-title" id="exampleModalLabel">Supprimer : @item.Model.Marque.Nom - @item.Model.Nom</h4>
                                </div>
                                <div class="modal-body">
                                    Etes vous sûr de vouloir supprimer se véhicule ?
                                </div>
                                <div class="modal-footer">
                                    <form method="post" action="/Vehicule/Delete/@item.Id">
                                        <button type="button" class="btn btn-info" data-dismiss="modal">Annuler</button>
                                        <input type="submit" class="btn btn-danger" value="Valider">
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </td>
            </tr>

            <tr class="">
                <td colspan="100" style="padding:0px;">
                    <table class="table table-bordered table-striped table-condensed cf text-center vertical-align">
                        <thead class="cf ">
                            <tr class="custom-tr text-center">
                                <th>
                                    référence
                                </th>
                                <th>
                                    Carburent
                                </th>
                                <th>
                                    Emission C02
                                </th>
                                <th>
                                    Année modele
                                </th>
                                <th>
                                    Puissance réelle
                                </th>
                                <th>
                                    Nb. places
                                </th>
                                <th>
                                    Type
                                </th>
                                <th>
                                    Prix neuf
                                </th>
                                <th>
                                    Boîte de vitesse
                                </th>
                            </tr>
                        </thead>
                        <tr class="custom-tr text-center">
                            <td data-title="référence">
                                @item.Model.Numero
                            </td>
                            <td data-title="Carburent">
                                @item.Model.Carburent
                            </td>
                            <td data-title="Emission Co2">
                                @item.Model.EmissionCo2
                            </td>
                            <td data-title="Année modele">
                                @item.Model.Annee
                            </td>
                            <td data-title="Puissance réelle">
                                @item.Model.PuissanceReel
                            </td>
                            <td data-title="Nb. places">
                                @item.Model.NbPlaces
                            </td>
                            <td data-title="Type">
                                @item.Model.Type
                            </td>
                            <td data-title="Prix neuf">
                                @item.Model.Prix
                            </td>
                            <td data-title="Boîte de vitesse">
                                @item.Model.BoiteDeVitesse
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        }
    </table>
</section>